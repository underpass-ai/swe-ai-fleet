---
# NATS Internal DNS Services
# Provides friendly internal URLs for NATS and other microservices
#
# Pattern: internal.<service>.underpassai.com  
# These services are NOT exposed publicly, only accessible within the cluster

# Internal DNS Services (ExternalName)
# These provide friendly internal URLs without public exposure

# NATS - internal.nats.underpassai.com:4222
apiVersion: v1
kind: Service
metadata:
  name: internal-nats
  namespace: swe-ai-fleet
  annotations:
    description: "Internal NATS access at internal.nats.underpassai.com"
spec:
  type: ExternalName
  externalName: nats.swe-ai-fleet.svc.cluster.local
  ports:
  - port: 4222
    targetPort: 4222
    name: client

---
# Planning - internal-planning:50051
apiVersion: v1
kind: Service
metadata:
  name: internal-planning
  namespace: swe-ai-fleet
  annotations:
    description: "Internal Planning service (gRPC)"
spec:
  type: ExternalName
  externalName: planning.swe-ai-fleet.svc.cluster.local
  ports:
  - port: 50051
    targetPort: 50051
    name: grpc

---
# StoryCoach - internal-storycoach:50052
apiVersion: v1
kind: Service
metadata:
  name: internal-storycoach
  namespace: swe-ai-fleet
  annotations:
    description: "Internal StoryCoach service (gRPC)"
spec:
  type: ExternalName
  externalName: storycoach.swe-ai-fleet.svc.cluster.local
  ports:
  - port: 50052
    targetPort: 50052
    name: grpc

---
# Workspace - internal-workspace:50053
apiVersion: v1
kind: Service
metadata:
  name: internal-workspace
  namespace: swe-ai-fleet
  annotations:
    description: "Internal Workspace service (gRPC)"
spec:
  type: ExternalName
  externalName: workspace.swe-ai-fleet.svc.cluster.local
  ports:
  - port: 50053
    targetPort: 50053
    name: grpc

---
# Registry - internal-registry:5000
apiVersion: v1
kind: Service
metadata:
  name: internal-registry
  namespace: swe-ai-fleet
  annotations:
    description: "Internal Registry service"
spec:
  type: ExternalName
  externalName: docker-registry.container-registry.svc.cluster.local
  ports:
  - port: 5000
    targetPort: 5000
    name: http
