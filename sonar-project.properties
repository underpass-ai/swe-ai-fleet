sonar.projectKey=underpass-ai-swe-ai-fleet
sonar.projectName=SWE AI FLEET
sonar.organization=underpass-ai-swe-ai-fleet
sonar.host.url=https://sonarcloud.io

# Source and test paths
sonar.sources=core,services,deploy/k8s
sonar.tests=tests
sonar.test.inclusions=tests/**/*.py
sonar.inclusions=core/**/*.py,services/**/*.py,deploy/k8s/*.yaml,services/planning-ui/src/**/*.{ts,tsx,js,jsx}

# Python configuration
sonar.python.version=3.13
sonar.python.coverage.reportPaths=coverage.xml

# TypeScript/JavaScript configuration
sonar.javascript.lcov.reportPaths=services/planning-ui/coverage/lcov.info
sonar.typescript.lcov.reportPaths=services/planning-ui/coverage/lcov.info

# Coverage thresholds
sonar.coverage.minimum=70
sonar.newCode.coverage.minimum=80

# Exclusions - Fixed coverage exclusions
sonar.coverage.exclusions=tests/**,**/test_*.py,**/*_test.py,**/__init__.py,**/__tests__/**,**/*.test.{ts,tsx,js,jsx},**/*.spec.{ts,tsx,js,jsx}
sonar.exclusions=**/*.md,**/*NOTES.md,**/*_pb2.py,**/*_pb2_grpc.py,**/*_pb2.pyi,**/gen/**,**/build-wrapper-dump.json,**/*.astro,**/dist/**,**/node_modules/**,**/ports/**/*.py
sonar.sourceEncoding=UTF-8

# Coverage Strategy: Focus on M5-M6 Hexagonal Refactor
# This PR spans 137 commits across milestones M2-M6 (5+ months).
# We exclude code from earlier milestones that's not part of core refactor:
#
# Excluded (M2-M4 experimental/integration-tested):
# - src/swe_ai_fleet/tools/**     → M3 Agent Tooling (590 lines, integration-tested)
# - src/swe_ai_fleet/agents/**    → M2 Legacy agents (203 lines, replaced by orchestrator/domain/agents)
# - src/swe_ai_fleet/ray_jobs/**  → M2 Ray integration (60 lines, E2E tested)
#
# Included (M5-M6 hexagonal refactor - FOCUS OF THIS PR):
# ✅ services/orchestrator/**     → Hexagonal architecture (92% coverage)
# ✅ services/planning/**         → DDD Planning Service (77%+ coverage)
# ✅ Core domain/application/infra → Clean architecture layers

# ============================================================================
# Issue Exclusions - False Positives for Kubernetes Storage
# ============================================================================
# Rule S6897: Storage requests in ephemeral containers (Deployments without PVCs)
# Rule S6870: Storage limits don't exist in Kubernetes PVC API
# Rule S1135: TODO comments tracked separately in project management
#
# See deploy/k8s/SONARQUBE_NOTES.md for detailed explanations
# Note: Automatic Analysis disabled in SonarCloud, using GitHub Actions only
# ============================================================================

sonar.issue.ignore.multicriteria=e3


# S1135: TODO comments (tracked separately)
sonar.issue.ignore.multicriteria.e3.ruleKey=kubernetes:S1135
sonar.issue.ignore.multicriteria.e3.resourceKey=deploy/k8s/*.yaml
