sonar.projectKey=underpass-ai-swe-ai-fleet
sonar.projectName=SWE AI FLEET
sonar.organization=underpass-ai-swe-ai-fleet
sonar.host.url=https://sonarcloud.io

# Force main branch analysis
sonar.branch.name=main

# Source and test paths
sonar.sources=core,services,deploy/k8s
sonar.tests=tests
sonar.test.inclusions=tests/**/*.py
sonar.inclusions=core/**/*.py,services/**/*.py,deploy/k8s/*.yaml

# Python configuration
sonar.python.version=3.13
sonar.python.coverage.reportPaths=coverage.xml

# Exclusions
sonar.coverage.exclusions=tests/**,src/swe_ai_fleet/tools/**,src/swe_ai_fleet/agents/**,src/swe_ai_fleet/ray_jobs/**
sonar.exclusions=**/*.md,**/*NOTES.md,**/*_pb2.py,**/*_pb2_grpc.py,**/*_pb2.pyi,**/gen/**
sonar.sourceEncoding=UTF-8

# Coverage Strategy: Focus on M5-M6 Hexagonal Refactor
# This PR spans 137 commits across milestones M2-M6 (5+ months).
# We exclude code from earlier milestones that's not part of core refactor:
#
# Excluded (M2-M4 experimental/integration-tested):
# - src/swe_ai_fleet/tools/**     → M3 Agent Tooling (590 lines, integration-tested)
# - src/swe_ai_fleet/agents/**    → M2 Legacy agents (203 lines, replaced by orchestrator/domain/agents)
# - src/swe_ai_fleet/ray_jobs/**  → M2 Ray integration (60 lines, E2E tested)
#
# Included (M5-M6 hexagonal refactor - FOCUS OF THIS PR):
# ✅ services/orchestrator/**     → Hexagonal architecture (92% coverage)
# ✅ Core domain/application/infra → Clean architecture layers

# ============================================================================
# Issue Exclusions - False Positives for Kubernetes Storage
# ============================================================================
# Rule S6897: Storage requests in ephemeral containers (Deployments without PVCs)
# Rule S6870: Storage limits don't exist in Kubernetes PVC API
# Rule S1135: TODO comments tracked separately in project management
# 
# See deploy/k8s/SONARQUBE_NOTES.md for detailed explanations
# Note: Automatic Analysis disabled in SonarCloud, using GitHub Actions only
# ============================================================================

sonar.issue.ignore.multicriteria=e1,e2,e3

# S6897: Storage request false positive
sonar.issue.ignore.multicriteria.e1.ruleKey=kubernetes:S6897
sonar.issue.ignore.multicriteria.e1.resourceKey=deploy/k8s/*.yaml

# S6870: Storage limit false positive  
sonar.issue.ignore.multicriteria.e2.ruleKey=kubernetes:S6870
sonar.issue.ignore.multicriteria.e2.resourceKey=deploy/k8s/*.yaml

# S1135: TODO comments (tracked separately)
sonar.issue.ignore.multicriteria.e3.ruleKey=kubernetes:S1135
sonar.issue.ignore.multicriteria.e3.resourceKey=deploy/k8s/*.yaml
